<div class="container" style="margin-top: 64px; max-width: 600px;">
  <div class="card z-depth-2">
    <div class="card-content">
      <div class="row" style="align-items: flex-start;">
        <div class="col s12 m12 l12">
          <!-- Input para seleccionar archivo -->
          <div class="file-field input-field" style="margin-bottom: 0;">
            <div class="btn blue">
              <span>Seleccionar Archivo</span>
              <input type="file" id="fileInput" (change)="onFileSelected($event)"
                accept=".pdf,.doc,.docx,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document">
            </div>
            <div class="file-path-wrapper">
              <input class="file-path validate" type="text" placeholder="Ningún archivo seleccionado">
            </div>
            <span class="helper-text grey-text text-darken-1">Solo se permiten archivos PDF y Word (DOC, DOCX)</span>
          </div>
        </div>
      </div>
      <div class="row" style="align-items: flex-start;">
        <div class="col s12 m12 l12">
          <!-- Selector de tipo de procesamiento OCR -->
          <div class="input-field" style="margin-top: 0;">
            <select #ocrProcessor [(ngModel)]="selectedOcrProcessor" id="ocrProcessor" name="ocrProcessor" materialize="material_select">
              <option value="Azure">Azure</option>
              <option value="Local">Local</option>
            </select>
            <label for="ocrProcessor">Seleccione el procesador OCR</label>
          </div>
        </div>
      </div>
      <div class="row" style="align-items: flex-start;">
        <div class="col s12 m12 l12">
          <!-- Imagen de previsualización o información del archivo -->
          <div *ngIf="!selectedFile" class="center-align">
            <img class="responsive-img" src="https://dummyimage.com/500x500/cccccc/000000&text=Aun no se ha cargado ningun archivo" alt="No Image Available">
          </div>
          <div *ngIf="selectedFile" class="card-panel grey lighten-5" style="margin-bottom: 0;">
            <div class="row valign-wrapper" style="margin-bottom: 0;">
              <div class="col s2 center-align">
                <i class="material-icons large blue-text text-darken-2">insert_drive_file</i>
              </div>
              <div class="col s10">
                <p class="blue-text text-darken-2 truncate" style="margin-bottom: 0;">{{ selectedFile.name }}</p>
                <p class="grey-text text-darken-1" style="margin-bottom: 0;">{{ (selectedFile.size / 1024).toFixed(2) }} KB</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Barra de progreso -->
      <div *ngIf="uploadStatus === 'uploading'" class="progress" style="margin-top: 16px;">
        <div class="determinate blue lighten-2" [style.width.%]="uploadProgress"></div>
      </div>
      <p *ngIf="uploadStatus === 'uploading'" class="center-align grey-text text-darken-1">{{ uploadProgress }}% Completado</p>
      <!-- Mensaje de éxito -->
      <div *ngIf="uploadStatus === 'success'" class="card-panel green lighten-5 center-align">
        <p class="green-text text-darken-3">¡Archivo subido correctamente!</p>
      </div>
      <!-- Respuesta JSON del OCR -->
      <div *ngIf="ocrResponse" class="card-panel blue lighten-5">
        <h6 class="blue-text text-darken-3">Respuesta OCR:</h6>
        <pre class="grey darken-4 white-text p-3" style="max-height: 150px; overflow:auto; border-radius: 4px;">{{ ocrResponse | json }}</pre>
      </div>
      <!-- Mensaje de error -->
      <div *ngIf="errorMessage" class="card-panel red lighten-4 center-align">
        <p class="red-text text-darken-3">{{ errorMessage }}</p>
      </div>
      <!-- Botones de acción -->
      <div class="row" style="margin-top: 24px; display: flex; flex-wrap: wrap; gap: 8px; justify-content: center;">
        <button *ngIf="selectedFile && uploadStatus !== 'uploading' && uploadStatus !== 'success'" (click)="uploadFile()" class="btn blue waves-effect waves-light">Subir Archivo</button>
        <button *ngIf="selectedFile && uploadStatus !== 'uploading' && selectedFile.type === 'application/pdf'" (click)="processOcr()" class="btn green waves-effect waves-light">Procesar OCR con {{selectedOcrProcessor}}</button>
        <button *ngIf="selectedFile || uploadStatus === 'success' || uploadStatus === 'error'" (click)="resetForm()" class="btn grey waves-effect waves-light">Reiniciar</button>
        <button *ngIf="ocrResponse" (click)="goToOcrViewer()" class="btn purple waves-effect waves-light">Ver Resultados OCR</button>
      </div>
    </div>
  </div>
</div>